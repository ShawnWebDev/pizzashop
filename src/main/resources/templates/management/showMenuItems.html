<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common-head :: common_html_head(${pageTitle}, ${additionalStyles})}"></head>

<body>
  <header th:insert="~{header :: head(${heading}, ${secondaryHeading})}"></header>

  <main>
    <section th:insert="~{systemNav :: systemNav}"></section>

    <section class="horizontal-center table-container">
      <a th:href="@{/system/changeMenu/addMenuItem}">Add Item</a>

      <p th:if="${assocMenuItemsErr}" class="error form-info">
        <span th:text="${assocMenuItemsErr}"></span>
      </p>

      <div class="table-scroll" id="table">
        <table>
          <thead>
          <tr>
            <th>Dish Name</th>
            <th>Description</th>
            <th>Category</th>
            <th>Available</th>
            <th>Qty Available</th>
            <th>Cost (cents)</th>
            <th>Price (cents)</th>
            <th>Action</th>
          </tr>
          </thead>

          <tbody>
          <tr th:each="item : ${menuItems}">
            <td th:text="${item.getDishName()}"></td>
            <td th:text="${item.getDescription()}"></td>
            <td th:text="${item.getMenuCategory()}"></td>
            <td th:text="${item.getIsAvailable()}"></td>
            <td th:text="${item.getAmountAvailable()}"></td>
            <td th:text="${item.getCostCents()}"></td>
            <td th:text="${item.getPriceCents()}"></td>
            <td class="table-actions">
              <a th:href="@{/system/changeMenu/showMenuItemRecipe(menuItemId=${item.getId()}, menuItemName=${item.getDishName()})}">Show Recipe</a>
              <a th:href="@{/system/changeMenu/addMenuItem(menuItemId=${item.getId()})}">Update</a>
              <a th:href="@{/system/changeMenu/deleteMenuItem(menuItemId=${item.getId()})}"
                 th:if="${item.dishName != T(com.pizzashop.entities.PizzaSizeEnum).SMALL.pizzaName &&
                  item.dishName != T(com.pizzashop.entities.PizzaSizeEnum).MEDIUM.pizzaName && item.dishName != T(com.pizzashop.entities.PizzaSizeEnum).LARGE.pizzaName}"
                 onclick="if (!(confirm('Are you sure you want to delete this record?'))) return false">Delete</a>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </section>

  </main>


</body>
<script src="/js/errorMsgTimeout.js" type="text/javascript"></script>
</html>